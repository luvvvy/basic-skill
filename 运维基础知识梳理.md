# 运维基础知识梳理

## 1. 选择题解析梳理

#### 1. 传输单元格式:

```
1.物理层----比特
2.数据链路层----帧
3.网络层-------包
4.传输层------段
5.会话层-----数据单元
6.表示层----数据单元
7.应用层----数据单元
```

### 2.IPv6地址为（128）位。

#### 3. 正确主机号

```
分类的IP地址由：网络号+主机号组成，主要分为A、B、C、D、E五类，我们能使用的只有A~C类，D类为多播地址，E类保留使用。
主机号全为0的时候，表示一个网段
主机号全为1的时候，是一个指向网络的广播
A类地址：0.0.0.0 ~ 127.255.255.255
主机号是后24位
B类地址：128.0.0.0 ~ 191.255.255.255
主机号是后16位
C类地址：192.0.0.0 ~ 223.255.255.255
主机号是后8位
D类地址：224.0.0.0 ~ 239.255.255.255
后28位为多播组号
E类地址：240.0.0.0 ~ 255.255.255.255
后27位待用
```

#### 4. 计算机网络基本目的之一是（资源共享）。

#### 5. 错误排查

```
ping是TCP/IP协议族的一部分，其属于网络层协议。主要是用来检测网络是否通畅。如果要ping其他网段则需要设置网关。
B错，和DNS没关系，DNS设置错会影响访问公网服务器的域名，而不会影响内部子设备直接是否ping通
C错，ping命令是跨操作系统的，即Windows主机能ping通Linux主机
D错，二层交换机如果出现故障那么同网段主机则不会ping通

netstat命令的功能是显示网络连接、路由表和网络接口信息，可以让用户得知有哪些网络连接正在运作。 使用时如果不带参数，netstat显示活动的 TCP 连接。
“ping”命令可以检查网络是否连通，可以很好地帮助我们分析和判定网络故障
ipconfig——当使用IPConfig时不带任何参数选项，那么它为每个已经配置了的接口显示IP地址、子网掩码和缺省网关值。 
nslookup命令用于查询DNS的记录，查看域名解析是否正常，在网络故障的时候用来诊断网络问题。
```

#### 6. 用户数据包 UDP 的首部字段有 8个字节

```
udp首部字段有8个字节，包括2字节的源端口号，2字节的目的端口号，2字节的包长度，2字节校验和
tcp首部字段20个字节

分组交换分为数据报分组交换和虚电路分组交换，数据报分组交换没有连接，虚电路分组交换要建立连接(逻辑连接)。虚电路交换又分为临时虚电路交换和永久虚电路交换
```

#### 7. 端口冲突

```
集线器的所有端口是一个冲突域，交换机的每个端口是一个冲突域，注意这两个不一样
```

#### 8.TCP模型

```
TCP/IP参考模型可以分为4个层次：应用层，传输层，互联层，主机—网络层。其中，应用层与OSI应用层相对应，传输层与OSI传输层相对应，互联层与OSI网络层相对应，主机—网络层与OSI数据链路层及物理层相对应。在TCP/IP参考模型中，对OSI表示层、会话层没有对应的协议

```

#### 9. 主机 A 向主机 B 连续发送了两个 TCP 报文段，其序号分包是 70 和 100 ，如果 A 发送的第一个报文段丢失了，但第二个报文段达到了 B ， B 在第二个报文段到达后向 A 发送确认，那么这个确认号是多少？

```
答案是70，确认号指的是接收方想要接收的报文段的序号，比如我想要1-5的报文，
在接收过程中我收到了2-5，而1丢了，这时候我肯定跟你说，再发一遍1，就是这个意思。
在这里序号70的丢了，所以确认号就是70，和后面的没关系。
MPLS VPN不提供加密和认证服务
```

#### 10. HTTP状态码

```
100 Continue 继续，一般在发送post请求时，已发送了http header之后服务端将返回此信息，表示确认，之后发送具体参数信息 2XX：成功状态码 200 OK 正常返回信息 201 Created 请求成功并且服务器创建了新的资源 202 Accepted 服务器已接受请求，但尚未处理 3XX：重定向 301 Moved Permanently 请求的网页已永久移动到新位置。 302 Found 临时性重定向。 303 See Other 临时性重定向，且总是使用 GET 请求新的 URI。 304 Not Modified 自从上次请求后，请求的网页未修改过。 4XX：客户端错误 400 Bad Request 服务器无法理解请求的格式，客户端不应当尝试再次使用相同的内容发起请求。 401 Unauthorized 请求未授权。 403 Forbidden 禁止访问。 404 Not Found 找不到如何与 URI 相匹配的资源。 5XX: 服务器错误 500 Internal Server Error 最常见的服务器端错误。 503 Service Unavailable 服务器端暂时无法处理请求（可能是过载或维护）。
```

#### 11. 检查DNS

```
athping 是指提供有关在源和目标之间的中间跃点处网络滞后和网络丢失的信息。
 pathping 8.8.8.8
nslookup可以指定查询的类型，可以查到DNS记录的生存时间还可以指定使用哪个 DNS服务器 进行解释。
 nslookup www.baidu.com
```

#### 12. 用户乙收到甲数字签名后的消息M，为验证消息的真实性，首先需要从CA获取用户甲的数字证书，该数字证书中包含（ ）

```
用户乙收到甲数字签名后的消息M，为验证消息的真实性，首先需要从CA获取用户甲的数字证书，该数字证书中包含(甲的公钥)
数字证书就是经过CA认证过的公钥，而私钥一般情况都是由证书持有者在自己本地生成的，由证书持有者自己负责保管。具体使用时，签名操作是发送方用私钥进行签名，接受方用发送方证书来验证签名；加密操作则是用接受方的证书进行加密，接受方用自己的私钥进行解密。
```

#### 13. 下列命令能查找当前目录一个月(30天)以前大于100M的日志文件(.log)并删除

```
find  . -name "*.log" –mtime +30 –type f –size +100M |xargs rm –rf {} ;
find 查找
. 在当前目录查找
-name 指定文件名
-mtime 指定修改时间(以天为单位) +xx 修改时间大于xx天 -xx修改时间小于xx天
-type 不知什么意思 应该是指定文件类型
-size 指定文件大小 +xx文件大小大于xx -xx文件大小小于xx
xargs 把前一命令输入当作后一命令输出，通常配合管道使用
```

#### 14. VLAN作用

```
VLAN最大的好处是可以隔离冲突域和广播域，试想，如果一个局域网内有上百台主机，如果一旦产生广播风暴，那麼，这个网络就会被彻底的瘫痪。
```

#### 15. 命令grep -A5 custer f1.txt的含义是

```
-A是显示匹配和它后面的n行。 
-B是显示匹配行和它前面的n行。 （before）
-C是匹配行和它前后各n行。 
```

#### 16. 半夜,你被服务器运营商的短信通知吵醒,短信告诉你"您的服务器在xxx.xx.xxx.xx在美国(ip:xx.xx.xx.xx)登录",作为运维工程师的你马上打开电脑并连上服务器,并在终端上打下()命令来查看最近的登录用户

```
last -n 5 | awk  '{print $1 "\t" $7}'

假如服务器被攻击,你要列出访问次数前十的ip地址,
答:ast | awk '{print$3}' | sort | uniq -c | sort -rn | head -10 ,last显示服务器上用户最近登录信息，第三列为远程登录主机的ip,第一次sort排序来让uniq -c显示重复行出现次数,sort -rn依据显示的次数降序显示，head -10代表显示10行
```

#### 17. zabbix相关组件

```
Zabbix agent用于采集上传监控数据
Zabbix server负责配置和接收监控信息
Zabbix proxy负责分担server的处理性能压力
Zabbix sender用于agent主动上传数据
Zabbix get用于server主动拉取数据
```

